<query-editor-row query-ctrl="ctrl" ng-if="!ctrl.datasource.metricNames">
    <div class="gf-form-inline">
        <div class="gf-form">
            <label class="gf-form-label">
                Loading metric names <span class="fa fa-spinner fa-spin"></span>
            </label>
        </div>
        <div class="gf-form gf-form--grow">
            <div class="gf-form-label gf-form-label--grow"></div>
        </div>
    </div>
</query-editor-row>
<query-editor-row query-ctrl="ctrl" can-collapse="false" ng-if="ctrl.datasource.metricNames">
    <div class="gf-form-inline">
        <div class="gf-form">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-8">
                    Metric
                    <label class="gf-form-label" bs-tooltip="ctrl.errors.metric" style="color: rgb(229, 189, 28)"
                           ng-show="ctrl.errors.metric">
                        <i class="fa fa-warning"></i>
                    </label>
                </label>
            </div>
        </div>
        <div class="gf-form">
            <metric-name-field></metric-name-field>
        </div>
        <div class="gf-form gf-form--grow">
            <div class="gf-form-label gf-form-label--grow"></div>
        </div>
    </div>

    <div class="gf-form-group">
        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-8">
                    Tags
                </label>
            </div>
            <div class="gf-form">
                <label class="gf-form-label" ng-show="ctrl.tagsLoading">
                    Loading tags <span class="fa fa-spinner fa-spin"></span>
                </label>
                <label class="gf-form-label" ng-show="!ctrl.tagsLoading">
                    <b>{{ctrl.tagsOptions.length}} tags, {{ctrl.tagsCombinations}} combinations</b>
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>
        <tags-select ng-repeat="tagOption in ctrl.tagsOptions"></tags-select>
    </div>
    <div ng-show="!ctrl.tagsLoading" class="gf-form-group">
        <!--todo: replace with tag, value, time-->

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-8">
                    Group by
                </label>
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-5">
                    Tag
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>
        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword offset-width-8 width-5">
                    Value
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>
        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword offset-width-8 width-5">
                    Time
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>
    </div>
</query-editor-row>